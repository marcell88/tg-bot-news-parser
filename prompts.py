# Константы для промптов, используемых в запросах к Large Language Models (LLM).
from typing import Dict, Any
import os
from dotenv import load_dotenv

# Явно загружаем .env файл
load_dotenv()

# Получаем переменные с преобразованием к нужному типу
ESSENCE_THRESHOLD = float(os.getenv('ESSENCE_THRESHOLD', 7.5))
ADJ_THRESHOLD = float(os.getenv('ADJ_THRESHOLD', 8.5))
FINAL_SCORE_THRESHOLD = float(os.getenv('FINAL_SCORE_THRESHOLD', 8.5))
CONTEXT_THRESHOLD = float(os.getenv('CONTEXT_THRESHOLD', 6))
MIN_SCORE_THRESHOLD = float(os.getenv('MIN_SCORE_THRESHOLD', 8))


# --- 1. ПЕРВАЯ ФИЛЬТРАЦИЯ - убираем плохие темы

FILTER_INITIAL = """

Промпт для фильтрации новостей (улучшенная версия)

Задача: Проанализируй текст новости и определи, нужно ли её фильтровать (отклонять) на основе строгих критериев.

ГЛАВНЫЙ ПРИНЦИП: Новость фильтруется только если она непосредственно, в явном виде и по своей основной сути и цели посвящена описанию, обсуждению или продвижению запретной темы. Если тема упоминается косвенно, контекстно, как пример или как часть более широкого обсуждения (особенно аналитического, экономического или культурного) — фильтрация НЕ применяется.

КРИТЕРИИ ФИЛЬТРАЦИИ (ЗАПРЕТНЫЕ ТЕМЫ):
Если новость по основной сути посвящена или подробно описывает хотя бы одну из следующих тем, она должна быть отклонена.

Категория А: Трагедии и насилие
1.  Гибель людей или травмы: Конкретные репортажи о случаях с смертельным исходом или получением физических травм. Исключение: Общие статьи о мерах безопасности, успехах медицины, научных исследованиях без упоминания конкретных жертв.
2.  Смерть или страдание животных: Новости о преднамеренном убийстве, жестоком обращении, мучениях или гибели животных. Исключение: Новости о защите прав животных, научных открытиях или законодательных инициативах без описания страданий.
3.  Совершение или подготовка террористического акта: Сообщения о конкретных совершенных, предотвращенных или готовящихся терактах с деталями. Исключение: Общая аналитика по борьбе с терроризмом, геополитике, законодательству без деталей конкретных инцидентов.
4.  Изнасилование или покушение на изнасилование: Подробные отчеты о конкретных преступлениях или судебных процессах по ним.
5.  Риск жизни или здоровью для уязвимых групп: Конкретные сообщения о ситуациях, где жизни детей, беременных, инвалидов или стариков угрожает непосредственная опасность (пожары, теракты, нападения). Исключение: Обсуждение социальной политики, льгот, инфраструктуры.
6.  Природные и техногенные катастрофы: Репортажи с мест катастроф (землетрясения, наводнения, аварии на производствах) с описанием разрушений, эвакуации и жертв.
7.  Авиапроисшествия и ДТП с жертвами: Новости о конкретных инцидентах, где есть погибшие или раненые. Исключение: Новости о новых правилах дорожного движения, технологиях безопасности.

Категория Б: Военная тематика и последствия
8.  Сводки о текущих боевых действиях: Оперативные отчеты с линии фронта, тактические описания боев, перемещений войск.
9.  Страдания мирного населения на войне: Репортажи о гибели, ранениях, лишениях и гуманитарных кризисах среди гражданского населения в зонах конфликтов.
10. Проблемы ветеранов со здоровьем: Подробные истории о тяжелых физических и психологических травмах (ПТСР, ампутации), полученных в ходе боевых действий. Исключение: Общие программы поддержки ветеранов, трудоустройства.
11. Последствия атак с жертвами: Описание результатов ракетных, артиллерийских или иных атак с акцентом на человеческие жертвы и разрушения.
12. Атаки беспилотников (БПЛА, дроны, безэкипажные катера): Новости о конкретных атаках с применением дронов, их последствиях (жертвы, разрушения) или сбитии.
13. Военные диверсии и их последствия: Сообщения о подрывах, саботаже и их результатах (жертвы, разрушения).
14. Новости про поимку или обвинение людей в государственной измене, оправдание терроризма, если это основная тема.
15. Новости про планы или проведение мобилизации в России или на Украине как основная тема.

Категория В: Социально-чувствительные темы
16. Аборты: Новости, напрямую посвященные практике абортов, законодательным изменениям по их регулированию или акциям за/против. Исключение: Обсуждение демографии, медицинской статистики в широком контексте.
17. Чечня и семья Кадыровых: Новости, где Чеченская Республика ИЛИ члены семьи Кадыровых являются главной и центральной темой материала. Исключение: Краткие упоминания в контексте федеральной политики, экономики, спорта.
18. ЛГБТ-пропаганда: Материалы, открыто пропагандирующие, позитивно освещающие или призывающие к принятию ЛГБТ-отношений и ценностей. Исключение: Критические, нейтральные или справочные упоминания в контексте закона, международных отношений, новостей о компаниях.
19. Педофилия и порнография: Репортажи о конкретных преступлениях сексуального характера против несовершеннолетних или материалы, связанные с детской порнографией. Исключение: Общественные дискуссии о безопасности интернета для детей без описания конкретных случаев.
20. Оскорбление религиозных чувств: Новости о конкретных актах осквернения религиозных символов, мест поклонения или издевательствах над верованиями.
21. Включение кого-то в список экстремистов, террористов, иноагентов как основная сенсационная тема.
22. Жестокое обращение с детьми: Конкретные репортажи о случаях физического, психологического насилия над детьми в семье, учреждениях. Исключение: Общие дискуссии о воспитании, педагогике.
23. Сообщение об очередном рекорде, который достиг Овечкин.
24. Сообщения об ущемлении или борьбе с ущемлением прав по признакам: гендерное равноправие, национальные меньшинства, трансгендерность — если это является основной темой и подано в активистском или скандальном ключе. Исключение: Аналитические материалы о социологии, законодательстве, международной практике.

ДОПОЛНИТЕЛЬНЫЕ КРИТЕРИИ ФИЛЬТРАЦИИ (по формату и содержанию):
Отклони новость, даже если она не попадает под запретные темы выше, если она представляет собой:

1.  Рекламные и маркетинговые материалы, откровенный пиар товаров, услуг, персон. Исключение: Анонсы культурных событий (выставки, концерты, премьеры фильмов/книг), новости о запуске значимых продуктов/сервисов компаниями, призывы подписаться на канал или группу после основной новости.
2.  Дайджесты новостей (сводки из нескольких разнородных новостей без единой темы).
3.  Сухие информационные сводки без аналитики или контекста: Краткие сообщения исключительно о ДТП, пробках, погоде, курсах валют, биржевых котировках, спортивных результатах.
4.  Официальные комментарии Марии Захаровой как основное и единственное содержание новости. Исключение: Если её комментарий цитируется в рамках более широкого аналитического материала.
5.  Конкретные кейсы мошенничества: Подробные описания конкретных случаев мошенничества через телефон, Госуслуги, приложение Max (и т.п.) с деталями схемы. Исключение: Общие предупреждения регуляторов, новости о внедрении новых систем безопасности.

ВАЖНО: КРИТИЧЕСКИЕ ИСКЛЮЧЕНИЯ (НЕ приводят к фильтрации):

1.  МЕЖДУНАРОДНЫЕ ОТНОШЕНИЯ И ПОЛИТИКА:
    - Дипломатические переговоры, санкции, торговые соглашения, визиты.
    - Внешняя политика стран (включая Китай, США, ЕС).
    - Международные экономические споры и конфликты.
    - Внутриполитические процессы в других странах (выборы, протесты).

2.  БИЗНЕС И ЭКОНОМИКА (ОСНОВНОЕ ИСКЛЮЧЕНИЕ):
    - Деятельность компаний (российских и международных): финансовые результаты, инвестиции, запуск проектов, выход на рынки, корпоративные конфликты, суды.
    - Макроэкономика: данные Росстата, показатели, прогнозы.
    - Рыночные отношения, экспорт/импорт, регулирование отраслей.
    - Новости о блокировке сервисов (типа Roblox) по решению регулятора — рассматривать как новость о бизнесе и регулировании, если нет явного акцента на шокирующих деталях преступлений.

3.  КУЛЬТУРА, НАУКА И ИСКУССТВО:
    - Театральные постановки, фильмы, книги, выставки — ЛЮБЫЕ анонсы, рецензии, отчеты об их создании или содержании.
    - Научные открытия, исследования, образовательные программы.
    - Исторические материалы и анализ.

4.  ОБЩЕСТВЕННО-ПОЛИТИЧЕСКАЯ АНАЛИТИКА И МНЕНИЯ:
    - Аналитические материалы, колонки, экспертные мнения по политике, экономике, обществу.
    - Высказывания публичных лиц (политиков, депутатов, блогеров), если это мнение, а не отчет о конкретном запретном инциденте.

5.  НЕПРЯМЫЕ УПОМИНАНИЯ И ФОН:
    - Краткие ссылки на страны, регионы, личности в контексте основной (разрешенной) темы.
    - Фоновые исторические справки.
    - Общие статистические данные без подробностей трагедий.
    - Призывы подписаться на канал в конце содержательной новости.

ИНСТРУКЦИЯ К ДЕЙСТВИЮ И ФОРМАТ ОТВЕТА:
1.  Внимательно прочти новость и определи её ОСНОВНУЮ СУТЬ и ЦЕЛЬ.
2.  Если основная суть новости прямо и явно соответствует хотя бы одному критерию из разделов "Запретные темы" или "Дополнительные критерии" — в поле "filter" укажи false (фильтровать).
3.  Если новость НЕ соответствует ни одному критерию, либо соответствие косвенное и подпадает под "Критические исключения" — в поле "filter" укажи true (пропустить).
4.  В поле "explain" кратко (1-2 предложения) объясни решение:
    - Если filter: false, укажи номер или суть нарушенного пункта (например: "П.6 Доп.критериев: сообщение-ссылка").
    - Если filter: true, объясни, почему новость прошла фильтр (например: "Новость об экономическом решении компании, исключение п.2 'Бизнес и экономика'").

Всегда отвечай строго в формате JSON:
{
  "filter": true,
  "explain": "Объяснение вашего решения."
}

"""

FILTER_INITIAL_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "filter": {
            "type": "boolean",
            "description": "Финальное решение: true (сообщение проходит фильтр) или false (сообщение не проходит фильтр) в соответствии с критериями FILTER_INITIAL."
        },
        "explain": {
            "type": "string",
            "description": "Краткое объяснение принятого решения (1-2 предложения), с указанием конкретного пункта нарушения, если filter=false."
        }
    },
    "required": ["filter", "explain"],
    "additionalProperties": False
}





# --- 2. ВТОРАЯ ФИЛЬТРАЦИЯ - убираем новости без контекста

CONTEXT_FILTRATION = """

Промпт для анализа контекста новости

Задача: Проанализируй текст новости и оцени каждый критерий по шкале от 0 до 10 баллов.

Шкала оценки:
- 10 = информация указана явно, однозначно и очевидна
- 7-9 = информация доступна, но с незначительными неясностями
- 5-6 = информация частично доступна, требуются допущения
- 3-4 = информация фрагментарна или сильно размыта
- 0-2 = информация отсутствует или крайне неясна

Критерии оценки:
1. subject (0-10): Насколько четко определены субъекты действия (конкретные люди/организации/группы)? Учитывай наличие имен, названий, должностей.
2. object (0-10): Насколько ясно указан объект или цель действия? Что является мишенью или получателем действия?
3. which (0-10): Насколько детально описаны субъекты/объекты (характеристики, статус, предыстория, квалификация)?
4. action (0-10): Насколько четко описано основное действие/событие? Однозначно ли понятно, что произошло?
5. time_place (0-10): Насколько конкретны указания времени (даты, периоды) и места (локации, адреса, регионы)?
6. how (0-10): Насколько хорошо объяснен метод/механизм действия? Каким способом было совершено действие?
7. reason (0-10): Насколько четко представлены мотивы/причины события? Что послужило триггером или основанием?
8. consequences (0-10): Насколько ясно описаны последствия/результаты? Какие изменения произошли вследствие события?

Инструкция:
1. Тщательно проанализируй текст новости по каждому критерию
2. Поставь оценку от 0 до 10 для каждого критерия
3. В поле context_explain напиши краткий анализ (2-3 предложения), выделив сильные и слабые стороны подачи информации

Формат ответа:
```json
{
  "subject_score": 8,
  "object_score": 7,
  "which_score": 6,
  "action_score": 9,
  "time_place_score": 5,
  "how_score": 6,
  "reason_score": 8,
  "consequences_score": 7,
  "context_explain": "Краткий анализ сильных и слабых сторон"
}

"""

CONTEXT_FILTRATION_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "subject_score": {
            "type": "number",
            "description": "Оценка четкости определения субъектов действия (0-10)"
        },
        "object_score": {
            "type": "number",
            "description": "Оценка ясности объекта или цели действия (0-10)"
        },
        "which_score": {
            "type": "number",
            "description": "Оценка детальности описания субъектов/объектов (0-10)"
        },
        "action_score": {
            "type": "number",
            "description": "Оценка четкости описания основного действия/события (0-10)"
        },
        "time_place_score": {
            "type": "number",
            "description": "Оценка конкретности указаний времени и места (0-10)"
        },
        "how_score": {
            "type": "number",
            "description": "Оценка объяснения метода/механизма действия (0-10)"
        },
        "reason_score": {
            "type": "number",
            "description": "Оценка представления мотивов/причин события (0-10)"
        },
        "consequences_score": {
            "type": "number",
            "description": "Оценка ясности описания последствий/результатов (0-10)"
        },
        "context_explain": {
            "type": "string",
            "description": "Краткий анализ сильных и слабых сторон подачи информации (2-3 предложения)"
        }
    },
    "required": [
        "subject_score",
        "object_score",
        "which_score",
        "action_score",
        "time_place_score",
        "how_score",
        "reason_score",
        "consequences_score",
        "context_explain"
    ],
    "additionalProperties": False
}



# --- 3. ТРЕТЬЯ ФИЛЬТРАЦИЯ - фильтруем по сути

ESSENCE_FILTRATION = """

# ПРОМПТ ДЛЯ АНАЛИЗА ПОТЕНЦИАЛА НОВОСТИ

## ЗАДАЧА
Проанализируй новость и оцени её потенциал для создания художественного комментария по 10 ключевым критериям.

## КРИТЕРИИ АНАЛИЗА ПОТЕНЦИАЛА

### 1. ПОТЕНЦИАЛ ЭМОЦИОНАЛЬНОГО РАСКРЫТИЯ
**Возможности для создания эмоционального комментария:**
- 0-3: Минимальный потенциал для эмоциональной интерпретации
- 4-6: Есть базовые эмоциональные точки для развития
- 7-8: Богатая почва для создания сильного эмоционального отклика
- 9-10: Идеальный материал для глубокого эмоционального воздействия

### 2. ПОТЕНЦИАЛ ВИЗУАЛИЗАЦИИ  
**Возможности для создания ярких образов и метафор:**
- 0-3: Ограниченный потенциал для визуального представления
- 4-6: Позволяет создать стандартные визуальные образы
- 7-8: Дает основу для создания запоминающихся визуальных картин
- 9-10: Идеальный материал для создания мощных визуальных образов

### 3. ПОТЕНЦИАЛ РАСКРЫТИЯ ГЕРОЕВ
**Возможности для художественного осмысления персонажей:**
- 0-3: Герои не дают материала для художественного развития
- 4-6: Есть базовые характеристики для создания образов
- 7-8: Персонажи имеют потенциал для глубокого раскрытия
- 9-10: Идеальные герои для создания многогранных художественных образов

### 4. ПОТЕНЦИАЛ АКТУАЛИЗАЦИИ
**Возможности для связи с современными трендами и проблемами:**
- 0-3: Ограниченная возможность актуализации
- 4-6: Может быть увязана с некоторыми современными темами
- 7-8: Хорошо ложится в текущий общественный контекст
- 9-10: Идеально вписывается в актуальную повестку

### 5. ПОТЕНЦИАЛ ДРАМАТУРГИИ
**Возможности для создания напряженного повествования:**
- 0-3: Минимальный потенциал для драматического развития
- 4-6: Есть элементы для создания умеренного напряжения
- 7-8: Хорошая основа для построения драматической дуги
- 9-10: Идеальный материал для создания напряженного сюжета

### 6. ПОТЕНЦИАЛ КОНТЕКСТУАЛИЗАЦИИ
**Возможности для раскрытия системных проблем через историю:**
- 0-3: Ограниченный потенциал для контекстуального анализа
- 4-6: Позволяет показать некоторые системные связи
- 7-8: Дает хорошую основу для анализа системных проблем
- 9-10: Идеальный пример для раскрытия глубинных проблем общества

### 7. ПОТЕНЦИАЛ УНИВЕРСАЛИЗАЦИИ
**Возможности для придания истории общечеловеческого звучания:**
- 0-3: Трудно вывести на уровень универсальных тем
- 4-6: Позволяет затронуть некоторые общечеловеческие вопросы
- 7-8: Хорошо поддается универсальной интерпретации
- 9-10: Идеальный материал для раскрытия фундаментальных тем

### 8. ПОТЕНЦИАЛ СИМВОЛИЗАЦИИ
**Возможности для превращения в символ или архетип:**
- 0-3: Ограниченный потенциал для символического прочтения
- 4-6: Может стать примером определенного явления
- 7-8: Хорошо поддается символической интерпретации
- 9-10: Идеальный материал для создания мощного символа

### 9. ПОТЕНЦИАЛ ВИРАЛЬНОСТИ
**Возможности для создания вовлекающего контента:**
- 0-3: Ограниченный потенциал для вирального распространения
- 4-6: Может вызвать умеренный интерес у аудитории
- 7-8: Хорошая основа для создания вовлекающего контента
- 9-10: Идеальный материал для вирального распространения

### 10. ПОТЕНЦИАЛ СЮЖЕТНОГО РАЗВИТИЯ
**Возможности для построения нарратива и композиции:**
- 0-3: Минимальный потенциал для сюжетного развития
- 4-6: Позволяет создать базовую повествовательную структуру
- 7-8: Дает хорошую основу для построения сложного нарратива
- 9-10: Идеальный материал для создания многослойного сюжета с драматургической завершенностью

## МЕТОДОЛОГИЯ ОЦЕНКИ
- Оценивай не фактические характеристики новости, а её СКРЫТЫЙ ПОТЕНЦИАЛ
- Представляй, как можно развить тему в художественном комментарии
- Учитывай возможности для творческой интерпретации и развития
- Фокусируйся на том, что МОЖНО сделать с материалом, а не на том, что есть
- В поле essence_explain напиши краткие комментарий и оценки по всем критериям

## ФОРМАТ ОТВЕТА
```json
{
  "emotional_score": 8,
  "visual_score": 7,
  "heroes_score": 6,
  "actual_score": 9,
  "drama_score": 7,
  "context_depth_score": 8,
  "universal_score": 7,
  "symbolic_score": 6,
  "viral_score": 8,
  "narrative_score": 7,
  "essence_explain": "Эмоциональный потенциал (8/10): сухие факты скрывают драму человеческих отношений, что позволяет создать глубокий эмоциональный комментарий. Визуальный потенциал (7/10): есть возможности для создания метафор бюрократической системы и ярких образов. Потенциал героев (6/10): персонажи имеют базовые характеристики, но требуют дополнительной разработки. Актуальность (9/10): идеально вписывается в современную повестку. Драматургический потенциал (7/10): содержит элементы конфликта для построения напряженного повествования. Контекстуальный потенциал (8/10): позволяет раскрыть системные проблемы через частный случай. Универсальность (7/10): тема понятна разным социальным группам. Символический потенциал (6/10): может стать примером определенного явления. Виральный потенциал (8/10): хорошая основа для создания вовлекающего контента. Сюжетный потенциал (7/10): материал позволяет выстроить композицию с конфликтом и развязкой."
}

"""

ESSENCE_FILTRATION_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "emotional_score": {
            "type": "number",
            "description": "Оценка эмоциональной яркости новости (0-10)"
        },
        "visual_score": {
            "type": "number", 
            "description": "Оценка визуальной образности новости (0-10)"
        },
        "heroes_score": {
            "type": "number",
            "description": "Оценка интересности героев новости (0-10)"
        },
        "actual_score": {
            "type": "number",
            "description": "Оценка актуальности новости для жителя России (0-10)"
        },
        "drama_score": {
            "type": "number",
            "description": "Оценка драматичности новости (0-10)"
        },
        "context_depth_score": {
            "type": "number",
            "description": "Оценка глубины контекста новости (0-10)"
        },
        "universal_score": {
            "type": "number",
            "description": "Оценка универсальности темы новости (0-10)"
        },
        "symbolic_score": {
            "type": "number",
            "description": "Оценка символического значения новости (0-10)"
        },
        "viral_score": {
            "type": "number",
            "description": "Оценка вирального потенциала новости (0-10)"
        },
        "narrative_score": {
            "type": "number",
            "description": "Оценка социальной значимости новости (0-10)"
        },
        "essence_explain": {
            "type": "string", 
            "description": "Перечислить оценки по критериям и дать общее краткое пояснение (2-3 предложения)"
        }
    },
    "required": [
        "emotional_score",
        "visual_score", 
        "heroes_score",
        "actual_score",
        "drama_score",
        "context_depth_score",
        "universal_score",
        "symbolic_score",
        "viral_score",
        "narrative_score",
        "essence_explain"
    ],
    "additionalProperties": False
}


TAGED_PROMPT = """

Проанализируй текст и создай 5 тегов, описывающих данный текст максимально уникальным образом:

1. **ТЭГ 1** (Люди?) → перечисли людей (действующие лица, комментаторы, наблюдатели и пр.), которые упоминаются в тексте
- Если есть хоть одно собственное имя - то используй только имена собственные
- Не более 3 лиц
- Приведи их общепринятые краткое наименование (например, только фамилию, или краткое название страны или компании).
- Расположи их по алфавиту

2. **ТЭГ 1** (Организации?) → перечисли названия организаций, брендов, марок продукции и прочих уникальных наименований (компании, международные организации, политические партии, марки авто, название оружия и прочее), которые упоминаются в тексте
- Не упоминай названия СМИ (исключение - если сама новость посвящена СМИ)
- Если есть хоть одно собственное имя - то используй только имена собственные
- Не более 3 названий организеций
- Приведи их общепринятые краткое наименование (например,  Apple, Tesla, ЦБ РФ).
- Расположи их по алфавиту

3. **ТЭГ 3** (Локации?) → опиши реальные локации (страны, города, площадки, мероприятия, форумы), которые упоминаются в тексте
- Если есть хоть одно собственное имя - то используй только имена собственные
- Не более трех локаций, в приоритете более конкретные (например, если можно указать и "Москва", и "Россия" - то указать только "Москва")
- Используй только общепринятые краткие названия на русском языке (например, "Россия", а не "Российская Федерация", или "США", а не "Соединенные Штаты Америки).
- Расположи их по алфавиту.

4. ТЭГ 4 (ключевые слова?) → укажи 3 ключевых слова, которые упоминаются в тексте
- Это не должны быть имена собственные или служебные части речи
- Проанализируй каждое слово (кроме служебных и нарицательных) по частоте использования в русском языке
- Выбери три разных ключевых слова, которые наименее часто используются в русском языке
- Расположи их в именительном падеже (или в виде инфинитива если это глагол), в алфавитном порядке

5. ТЭГ 5 (Основная тема? Что происходит?) → напиши основную тему даной новости, ключевой процесс/событие, которое произошло или происходит (одним словом или одним законченным словосочетанием)

**Правила:**
- Используй только текст новости не домысливай
- Если инфрмации нет по какому-то тэгу явно в новости нет - просто верни строку "нет информации"

## ФОРМАТ ОТВЕТА
```json
{
  "tag1": "Сечин, Шульгинов",
  "tag2": "CNPC, Роснефть",
  "tag3": "Сочи, Усть-Луга", 
  "tag4": "Диверсификация, меморандум, углеводороды",
  "tag5": "Строительство нефтехимического комбината"
}

"""

TAGED_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "tag1": {
            "type": "string",
            "description": "Люди"
        },
        "tag2": {
            "type": "string", 
            "description": "Организации"
        },
        "tag3": {
            "type": "string",
            "description": "Места"
        },
        "tag4": {
            "type": "string",
            "description": "Слова"
        },
        "tag5": {
            "type": "string",
            "description": "О чем"
        }
    },
    "required": [
        "tag1",
        "tag2", 
        "tag3",
        "tag4",
        "tag5"
    ],
    "additionalProperties": False
}

SHORTEN_PROMPT = """

## ИНСТРУКЦИЯ
Перескажи кратко (не более 2-3 предложений) о чем это сообщение, которое написано ниже. 
Сохрани стиль самого сообщения.

## ФОРМАТ ОТВЕТА
ответ в виде строки (короткий пересказ новости)

"""

SHORTEN_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "short_text": {
            "type": "string", 
            "description": "короткий пересказ новости"
        }
    },
    "required": ["short_text"]
}

MYTH_PROMPT = """

Ты — литературный редактор. Оцени новость на её потенциал для создания художественного комментария в стиле известных писателей.

## КРИТЕРИИ ОЦЕНКИ ПОТЕНЦИАЛА НОВОСТИ

### 1. БОГАТСТВО КОНФЛИКТОВ (вес 1.3)
Наличие противоречий для художественного осмысления:
- 10: Многоуровневые конфликты (личные, социальные, моральные, экзистенциальные)
- 9: Глубокие многослойные конфликты с эмоциональной напряженностью
- 8: Ясные центральные противоречия с сильным потенциалом развития
- 7: Определенные конфликты с умеренной сложностью
- 6: Один основной конфликт без значительной глубины
- 5: Базовый конфликт с ограниченным развитием
- 4: Слабые, поверхностные противоречия
- 3: Минимальные признаки конфликта
- 2: Едва различимые противоречия
- 1-0: Конфликт отсутствует

### 2. ПОТЕНЦИАЛ ДЛЯ СТИЛИЗАЦИИ (вес 1.2)
Возможности для интерпретации в разных литературных стилях:
- 10: Идеально подходит для 5+ различных стилей с богатыми возможностями
- 9: Отлично ложится в 4-5 различных стилей
- 8: Хорошо подходит для 3-4 стилей с разнообразием подходов
- 7: Уверенно работает в 2-3 стилях
- 6: Подходит для 1-2 стандартных подходов
- 5: Ограниченный выбор стилей
- 4: Слабые возможности для стилизации
- 3: Минимальный потенциал для художественной обработки
- 2: Единичные возможности стилизации
- 1-0: Не поддается художественной стилизации

### 3. ГЛУБИНА ТЕМЫ (вес 1.1)
Возможности для раскрытия универсальных тем:
- 10: Затрагивает фундаментальные экзистенциальные темы
- 9: Глубоко раскрывает универсальные человеческие проблемы
- 8: Позволяет раскрыть значимые социальные/моральные вопросы
- 7: Достаточная глубина для серьезного осмысления
- 6: Ограниченный тематический потенциал
- 5: Базовые темы без развития
- 4: Поверхностная тематика
- 3: Минимальная тематическая ценность
- 2: Едва различимые темы
- 1-0: Тематически бедный материал

### 4. ОБРАЗНЫЙ ПОТЕНЦИАЛ (вес 1.0)
Возможности для создания метафор и символов:
- 10: Богатая почва для создания сложных символических систем
- 9: Мощный потенциал для многоуровневых метафор и аллегорий
- 8: Позволяет построить выразительные метафоры и символы
- 7: Хорошие возможности для образного осмысления
- 6: Ограниченный образный потенциал
- 5: Базовые возможности для метафоризации
- 4: Минимальные возможности для образности
- 3: Слабый образный потенциал
- 2: Единичные возможности для образов
- 1-0: Фактографический материал без образного потенциала

### 5. ДРАМАТУРГИЧЕСКАЯ ЗАВЕРШЕННОСТЬ (вес 1.0)
Наличие естественной драматургической дуги:
- 10: Готовая драматургическая структура с полной аркой и катарсисом
- 9: Завершенная драматургия с эмоциональной кульминацией
- 8: Ясная драматургическая основа для развития с сильной завязкой
- 7: Определенная драматургическая структура с потенциалом
- 6: Фрагментарная драматургия, требует доработки
- 5: Базовые драматургические элементы
- 4: Слабая драматургическая основа
- 3: Минимальные признаки драматургии
- 2: Едва различимая структура
- 1-0: Отсутствие драматургической структуры

## МЕТОДОЛОГИЯ ОЦЕНКИ
- Оценивай СЫРУЮ НОВОСТЬ, а не возможный комментарий
- Представляй, как эту новость могли бы обыграть разные писатели
- Фокусируйся на том, какие литературные возможности заложены в материале
- Учитывай потенциал для разных жанров и стилей

## ФОРМУЛА РАСЧЕТА:
(К1 * 1.3 + К2 * 1.2 + К3 * 1.1 + К4 * 1.0 + К5 * 1.0) / 5.6

Верни ответ в формате JSON с полем "myth_score" содержащим итоговый балл от 0.0 до 10.0.

## ПРИМЕРЫ ОЦЕНОК:
- Скандал с политиком + человеческая драма: 8.4
- Технологический прорыв с этическими дилеммами: 7.8
- Обычная бюрократическая новость: 4.2
- Сухой статистический отчет: 2.1

**Пример вывода:** {"myth_score": 8.5}

"""

MYTH_SCHEMA: Dict[str, Any] = {
    "type": "object",
    "properties": {
        "myth_score": {
            "type": "number",
            "description": "Оценка соответствия текста архетипическим сюжетным структурам от 0.0 до 10.0"
        }
    },
    "required": ["myth_score"]
}
